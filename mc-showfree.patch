diff -up mc-4.6.2/src/layout.c.showfree mc-4.6.2/src/layout.c
--- mc-4.6.2/src/layout.c.showfree	2009-05-26 14:57:36.000000000 +0200
+++ mc-4.6.2/src/layout.c	2009-05-26 14:57:36.000000000 +0200
@@ -97,6 +97,9 @@ int message_visible = 1;
 /* Set to show current working dir in xterm window title */
 int xterm_title = 1;
 
+/* Set to show free space on device assigned to current directory */
+int free_space = 1;
+
 /* The starting line for the output of the subprogram */
 int output_start_y = 0;
 
@@ -126,6 +129,7 @@ static int _command_prompt;
 static int _keybar_visible;
 static int _message_visible;
 static int _xterm_title;
+static int _free_space;
 static int _permission_mode;
 static int _filetype_mode;
 
@@ -156,6 +160,7 @@ static struct {
     int    *variable;
     WCheck *widget;
 } check_options [] = {
+    { N_("show free sp&Ace"),  &free_space,      0 },
     { N_("&Xterm window title"), &xterm_title,   0 },
     { N_("h&Intbar visible"),  &message_visible, 0 },
     { N_("&Keybar visible"),   &keybar_visible,  0 },
@@ -227,8 +232,8 @@ static int b2left_cback (int action)
     if (_equal_split){
 	/* Turn equal split off */
 	_equal_split = 0;
-	check_options [6].widget->state = check_options [6].widget->state & ~C_BOOL;
-	dlg_select_widget (check_options [6].widget);
+	check_options [7].widget->state = check_options [7].widget->state & ~C_BOOL;
+	dlg_select_widget (check_options [7].widget);
 	dlg_select_widget (bleft_widget);
     }
     _first_panel_size++;
@@ -242,8 +247,8 @@ static int b2right_cback (int action)
     if (_equal_split){
 	/* Turn equal split off */
 	_equal_split = 0;
-	check_options [6].widget->state = check_options [6].widget->state & ~C_BOOL;
-	dlg_select_widget (check_options [6].widget);
+	check_options [7].widget->state = check_options [7].widget->state & ~C_BOOL;
+	dlg_select_widget (check_options [7].widget);
 	dlg_select_widget (bright_widget);
     }
     _first_panel_size--;
@@ -289,23 +294,24 @@ layout_callback (struct Dlg_head *h, dlg
 	    if (old_output_lines != _output_lines){
 		old_output_lines = _output_lines;
 		attrset (COLOR_NORMAL);
-		dlg_move (h, 9, 16 + first_width);
+		dlg_move (h, 10, 16 + first_width);
 		addstr (output_lines_label);
-		dlg_move (h, 9, 10 + first_width);
+		dlg_move (h, 10, 10 + first_width);
 		tty_printf ("%02d", _output_lines);
 	    }
 	}
 	return MSG_HANDLED;
 
     case DLG_POST_KEY:
-	_filetype_mode = check_options [8].widget->state & C_BOOL;
-	_permission_mode = check_options [7].widget->state & C_BOOL;
-	_equal_split = check_options [6].widget->state & C_BOOL;
-	_menubar_visible = check_options [5].widget->state & C_BOOL;
-	_command_prompt = check_options [4].widget->state & C_BOOL;
-	_keybar_visible = check_options [2].widget->state & C_BOOL;
-	_message_visible = check_options [1].widget->state & C_BOOL;
-	_xterm_title = check_options [0].widget->state & C_BOOL;
+	_filetype_mode = check_options [9].widget->state & C_BOOL;
+	_permission_mode = check_options [8].widget->state & C_BOOL;
+	_equal_split = check_options [7].widget->state & C_BOOL;
+	_menubar_visible = check_options [6].widget->state & C_BOOL;
+	_command_prompt = check_options [5].widget->state & C_BOOL;
+	_keybar_visible = check_options [3].widget->state & C_BOOL;
+	_message_visible = check_options [2].widget->state & C_BOOL;
+	_xterm_title = check_options [1].widget->state & C_BOOL;
+	_free_space = check_options [0].widget->state & C_BOOL;
 	if (console_flag){
 	    int minimum;
 	    if (_output_lines < 0)
@@ -333,7 +339,7 @@ layout_callback (struct Dlg_head *h, dlg
 	    if (old_output_lines != _output_lines){
 		old_output_lines = _output_lines;
 		attrset (COLOR_NORMAL);
-		dlg_move (h, 9, 10 + first_width);
+		dlg_move (h, 10, 10 + first_width);
 		tty_printf ("%02d", _output_lines);
 	    }
 	}
@@ -372,7 +378,7 @@ init_layout (void)
 		first_width = l1;
 	}
 
-	for (i = 0; i <= 8; i++) {
+	for (i = 0; i <= 9; i++) {
 	    check_options[i].text = _(check_options[i].text);
 	    l1 = mbstrlen (check_options[i].text) + 7;
 	    if (l1 > first_width)
@@ -389,7 +395,7 @@ init_layout (void)
 
 
 	second_width = mbstrlen (title3) + 1;
-	for (i = 0; i < 6; i++) {
+	for (i = 0; i < 7; i++) {
 	    check_options[i].text = _(check_options[i].text);
 	    l1 = mbstrlen (check_options[i].text) + 7;
 	    if (l1 > second_width)
@@ -444,23 +450,23 @@ init_layout (void)
 			    0));
     if (console_flag) {
 	add_widget (layout_dlg,
-		    button_new (9, 12 + first_width, B_MINUS,
+		    button_new (10, 12 + first_width, B_MINUS,
 				NARROW_BUTTON, "&-", bminus_cback));
 	add_widget (layout_dlg,
-		    button_new (9, 7 + first_width, B_PLUS, NARROW_BUTTON,
+		    button_new (10, 7 + first_width, B_PLUS, NARROW_BUTTON,
 				"&+", bplus_cback));
     }
 #define XTRACT(i) *check_options[i].variable, check_options[i].text
 
-    for (i = 0; i < 6; i++) {
+    for (i = 0; i < 7; i++) {
 	check_options[i].widget =
-	    check_new (8 - i, 7 + first_width, XTRACT (i));
+	    check_new (9 - i, 7 + first_width, XTRACT (i));
 	add_widget (layout_dlg, check_options[i].widget);
     }
-    check_options[8].widget = check_new (10, 6, XTRACT (8));
+    check_options[9].widget = check_new (10, 6, XTRACT (9));
+    add_widget (layout_dlg, check_options[9].widget);
+    check_options[8].widget = check_new (9, 6, XTRACT (8));
     add_widget (layout_dlg, check_options[8].widget);
-    check_options[7].widget = check_new (9, 6, XTRACT (7));
-    add_widget (layout_dlg, check_options[7].widget);
 
     _filetype_mode = filetype_mode;
     _permission_mode = permission_mode;
@@ -470,20 +476,21 @@ init_layout (void)
     _keybar_visible = keybar_visible;
     _message_visible = message_visible;
     _xterm_title = xterm_title;
+    _free_space = free_space;
     bright_widget =
 	button_new (6, 15, B_2RIGHT, NARROW_BUTTON, "&>", b2right_cback);
     add_widget (layout_dlg, bright_widget);
     bleft_widget =
 	button_new (6, 9, B_2LEFT, NARROW_BUTTON, "&<", b2left_cback);
     add_widget (layout_dlg, bleft_widget);
-    check_options[6].widget = check_new (5, 6, XTRACT (6));
+    check_options[7].widget = check_new (5, 6, XTRACT (7));
     old_first_panel_size = -1;
     old_horizontal_split = -1;
     old_output_lines = -1;
 
     _first_panel_size = first_panel_size;
     _output_lines = output_lines;
-    add_widget (layout_dlg, check_options[6].widget);
+    add_widget (layout_dlg, check_options[7].widget);
     radio_widget = radio_new (3, 6, 2, s_split_direction);
     add_widget (layout_dlg, radio_widget);
     radio_widget->sel = horizontal_split;
diff -up mc-4.6.2/src/layout.h.showfree mc-4.6.2/src/layout.h
--- mc-4.6.2/src/layout.h.showfree	2009-02-01 20:30:21.000000000 +0100
+++ mc-4.6.2/src/layout.h	2009-05-26 14:57:36.000000000 +0200
@@ -39,6 +39,7 @@ extern int keybar_visible;
 extern int output_start_y;
 extern int message_visible;
 extern int xterm_title;
+extern int free_space;
 
 extern int horizontal_split;
 extern int nice_rotating_dash;
diff -up mc-4.6.2/src/main.c.showfree mc-4.6.2/src/main.c
--- mc-4.6.2/src/main.c.showfree	2009-05-26 14:57:36.000000000 +0200
+++ mc-4.6.2/src/main.c	2009-05-26 14:57:36.000000000 +0200
@@ -62,6 +62,7 @@
 #include "listmode.h"
 #include "execute.h"
 #include "ext.h"		/* For flush_extension_file() */
+#include "mountlist.h"		/* my_statfs */
 
 /* Listbox for the command history feature */
 #include "widget.h"
@@ -233,6 +234,12 @@ Dlg_head *midnight_dlg;
 /* We need to paint it after CONSOLE_RESTORE, see: load_prompt */
 int update_prompt = 0;
 
+/* Old current working directory for displaying free space */
+char *old_cwd = NULL;
+
+/* Used to figure out how many free space we have */
+struct my_statfs myfs_stats;
+
 /* The home directory */
 const char *home_dir = NULL;
 
@@ -404,6 +411,8 @@ update_panels (int force_update, const c
     int reload_other = !(force_update & UP_ONLY_CURRENT);
     WPanel *panel;
 
+    show_free_space(current_panel);
+
     update_one_panel (get_current_index (), force_update, current_file);
     if (reload_other)
 	update_one_panel (get_other_index (), force_update, UP_KEEPSEL);
@@ -469,6 +478,38 @@ stop_dialogs (void)
     }
 }
 
+void
+show_free_space(WPanel *panel)
+{
+    /* Don't try to stat non-local fs */
+    if (!vfs_file_is_local(panel->cwd) || !free_space)
+	return;
+   
+    if (old_cwd == NULL || strcmp(old_cwd, panel->cwd) != 0) {
+	char rpath[PATH_MAX];
+    
+	init_my_statfs();
+	g_free(old_cwd);
+	old_cwd = g_strdup(panel->cwd);
+	
+	if (mc_realpath (panel->cwd, rpath) == NULL)
+            return;
+	my_statfs (&myfs_stats, rpath);
+    }
+   
+    if (myfs_stats.avail > 0 || myfs_stats.total > 0) {
+	char buffer1 [6], buffer2[6], *tmp;
+	size_trunc_len (buffer1, 5, myfs_stats.avail, 1);
+	size_trunc_len (buffer2, 5, myfs_stats.total, 1);
+	tmp = g_strdup_printf (_("%s (%d%%) of %s"), buffer1, myfs_stats.total > 0 ?
+			       (int)(100 * (double)myfs_stats.avail / myfs_stats.total) : 0,
+			       buffer2);
+	widget_move (&panel->widget, panel->widget.lines-1, panel->widget.cols-2-strlen(tmp));
+	addstr (tmp);
+	g_free (tmp);
+    }
+}
+                                                                                                                                                                                                                                 
 static int
 quit_cmd_internal (int quiet)
 {
diff -up mc-4.6.2/src/main.h.showfree mc-4.6.2/src/main.h
--- mc-4.6.2/src/main.h.showfree	2009-05-26 14:57:36.000000000 +0200
+++ mc-4.6.2/src/main.h	2009-05-26 14:57:36.000000000 +0200
@@ -55,6 +55,7 @@ extern int cd_symlinks;
 extern int show_all_if_ambiguous;
 extern int slow_terminal;
 extern int update_prompt;	/* To comunicate with subshell */
+extern char *old_cwd;
 extern int safe_delete;
 extern int confirm_delete;
 extern int confirm_directory_hotlist_delete;
@@ -102,6 +103,7 @@ void change_panel   (void);
 int load_prompt     (int, void *);
 void save_cwds_stat (void);
 void quiet_quit_cmd (void);	/* For cmd.c and command.c */
+void show_free_space(WPanel *panel);
 
 void touch_bar      (void);
 void update_xterm_title_path (void);
diff -up mc-4.6.2/src/screen.c.showfree mc-4.6.2/src/screen.c
--- mc-4.6.2/src/screen.c.showfree	2009-05-26 14:57:36.000000000 +0200
+++ mc-4.6.2/src/screen.c	2009-05-26 14:59:37.000000000 +0200
@@ -49,7 +49,7 @@
 #include "widget.h"
 #include "menu.h"		/* menubar_visible */
 #define WANT_WIDGETS
-#include "main.h"		/* the_menubar */
+#include "main.h"		/* the_menubar, show_free_space() */
 #include "unixcompat.h"
 
 #ifdef HAVE_CHARSET
@@ -884,6 +884,7 @@ mini_info_separator (WPanel *panel)
     hline ((slow_terminal ? '-' : ACS_HLINE) | NORMAL_COLOR,
 	   panel->widget.cols - 2);
 #endif				/* !HAVE_SLANG */
+    show_free_space (panel);
 }
 
 void
@@ -938,6 +939,8 @@ show_dir (WPanel *panel)
     widget_move (&panel->widget, 0, panel->widget.cols - 3);
     addstr ("v");
 
+    mini_info_separator (panel);
+
     if (panel->active)
 	standend ();
 }
diff -up mc-4.6.2/src/setup.c.showfree mc-4.6.2/src/setup.c
--- mc-4.6.2/src/setup.c.showfree	2009-05-26 14:57:36.000000000 +0200
+++ mc-4.6.2/src/setup.c	2009-05-26 14:57:36.000000000 +0200
@@ -138,6 +138,7 @@ static const struct {
     { "show_mini_info", &show_mini_info },
     { "permission_mode", &permission_mode },
     { "filetype_mode", &filetype_mode },
+    { "free_space", &free_space },
     { 0, 0 }
 };
 
